<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout & Meal Tracker</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1a1a2e">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Login Screen -->
        <div id="loginScreen" class="screen active">
            <div class="login-container">
                <h1>Workout Tracker</h1>
                <input type="text" id="usernameInput" placeholder="Enter username" autocomplete="off">
                <input type="password" id="passwordInput" placeholder="Enter password">
                <button onclick="app.login()">Login</button>
                <button onclick="app.showCreateAccount()">Create Account</button>
            </div>
        </div>

        <!-- Create Account Screen -->
        <div id="createAccountScreen" class="screen">
            <div class="login-container">
                <h1>Create Account</h1>
                <input type="text" id="newUsername" placeholder="Choose username" autocomplete="off">
                <input type="password" id="newPassword" placeholder="Choose password">
                <input type="password" id="confirmPassword" placeholder="Confirm password">
                <button onclick="app.createAccount()">Create Account</button>
                <button onclick="app.showLogin()">Back to Login</button>
            </div>
        </div>

        <!-- Main App -->
        <div id="mainScreen" class="screen">
            <!-- Header -->
            <div class="header">
                <h1>Workout Tracker</h1>
                <div class="user-info">
                    <span id="currentUser"></span>
                    <button onclick="app.logout()" class="logout-btn">Logout</button>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-nav">
                <button class="tab-btn active" onclick="app.switchTab('workout')">Workout</button>
                <button class="tab-btn" onclick="app.switchTab('meals')">Meals</button>
                <button class="tab-btn" onclick="app.switchTab('progress')">Progress</button>
                <button class="tab-btn" onclick="app.switchTab('profile')">Profile</button>
            </div>

            <!-- Workout Tab -->
            <div id="workoutTab" class="tab-content active">
                <div class="content-container">
                    <div class="week-selector">
                        <button onclick="app.changeWeek(-1)">← Prev Week</button>
                        <span id="currentWeek">Week 1</span>
                        <button onclick="app.changeWeek(1)">Next Week →</button>
                    </div>

                    <div class="day-selector">
                        <button class="day-btn active" onclick="app.selectDay(1)">Day 1<br><small>Push</small></button>
                        <button class="day-btn" onclick="app.selectDay(2)">Day 2<br><small>Pull</small></button>
                        <button class="day-btn" onclick="app.selectDay(3)">Day 3<br><small>Legs</small></button>
                        <button class="day-btn" onclick="app.selectDay(4)">Day 4<br><small>Shoulders & Arms</small></button>
                        <button class="day-btn" onclick="app.selectDay(5)">Day 5<br><small>Posterior Chain</small></button>
                        <button class="day-btn cardio-day" onclick="app.selectDay(6)">Day 6<br><small>Cardio</small></button>
                        <button class="day-btn cardio-day" onclick="app.selectDay(7)">Day 7<br><small>Cardio</small></button>
                    </div>

                    <div id="workoutContent"></div>
                </div>
            </div>

            <!-- Meals Tab -->
            <div id="mealsTab" class="tab-content">
                <div class="content-container">
                    <div class="week-selector">
                        <button onclick="app.changeMealWeek(-1)">← Prev Week</button>
                        <span id="currentMealWeek">Week 1</span>
                        <button onclick="app.changeMealWeek(1)">Next Week →</button>
                    </div>

                    <div class="day-selector">
                        <button class="day-btn active" onclick="app.selectMealDay(1)">Mon<br><small id="day1Type">Moderate</small></button>
                        <button class="day-btn" onclick="app.selectMealDay(2)">Tue<br><small id="day2Type">Low</small></button>
                        <button class="day-btn" onclick="app.selectMealDay(3)">Wed<br><small id="day3Type">Moderate</small></button>
                        <button class="day-btn" onclick="app.selectMealDay(4)">Thu<br><small id="day4Type">Low</small></button>
                        <button class="day-btn" onclick="app.selectMealDay(5)">Fri<br><small id="day5Type">Moderate</small></button>
                        <button class="day-btn" onclick="app.selectMealDay(6)">Sat<br><small id="day6Type">Low</small></button>
                        <button class="day-btn" onclick="app.selectMealDay(7)">Sun<br><small id="day7Type">Low</small></button>
                    </div>

                    <div id="mealContent"></div>
                </div>
            </div>

            <!-- Progress Tab -->
            <div id="progressTab" class="tab-content">
                <div class="content-container">
                    <h2>Weekly Progress</h2>
                    <div id="progressContent"></div>
                    <button onclick="app.exportProgress()" class="export-btn">Export Progress</button>
                </div>
            </div>

            <!-- Profile Tab -->
            <div id="profileTab" class="tab-content">
                <div class="content-container">
                    <h2>Profile Settings</h2>
                    
                    <div class="profile-section">
                        <h3>Change Password</h3>
                        <input type="password" id="currentPassword" placeholder="Current password">
                        <input type="password" id="newPasswordProfile" placeholder="New password">
                        <input type="password" id="confirmPasswordProfile" placeholder="Confirm new password">
                        <button onclick="app.changePassword()">Update Password</button>
                    </div>

                    <div class="profile-section">
                        <h3>Workout Plan</h3>
                        <button onclick="app.editWorkoutPlan()">Edit Workout Plan</button>
                    </div>

                    <div class="profile-section">
                        <h3>Meal Plan</h3>
                        <button onclick="app.editMealPlan()">Edit Meal Plan</button>
                    </div>

                    <div class="profile-section">
                        <h3>Meal Reminders</h3>
                        <label>
                            <input type="checkbox" id="enableReminders" onchange="app.toggleReminders()">
                            Enable meal notifications
                        </label>
                        <div id="reminderTimes" style="display: none; margin-top: 10px;">
                            <p><small>Set times for each meal:</small></p>
                            <label>Meal 1: <input type="time" id="meal1Time" value="08:00" onchange="app.saveReminderTimes()"></label>
                            <label>Meal 2: <input type="time" id="meal2Time" value="11:00" onchange="app.saveReminderTimes()"></label>
                            <label>Meal 3: <input type="time" id="meal3Time" value="14:00" onchange="app.saveReminderTimes()"></label>
                            <label>Meal 4: <input type="time" id="meal4Time" value="17:00" onchange="app.saveReminderTimes()"></label>
                            <label>Meal 5: <input type="time" id="meal5Time" value="20:00" onchange="app.saveReminderTimes()"></label>
                        </div>
                    </div>

                    <div id="masterSection" class="profile-section" style="display: none;">
                        <h3>Master Controls</h3>
                        <button onclick="app.viewAllUsers()">View All Users</button>
                        <button onclick="app.exportAllData()">Export All Data</button>
                    </div>

                    <div class="profile-section">
                        <button onclick="app.deleteAccount()" class="delete-btn">Delete Account</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // Register service worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed'));
        }
    </script>
</body>
</html>
